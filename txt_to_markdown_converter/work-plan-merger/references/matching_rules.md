# 工作规划匹配规则配置

## 匹配算法配置

### 相似度计算权重
- `keywords_weight`: 0.4 - 关键词匹配权重
- `structure_weight`: 0.3 - 结构相似度权重
- `position_weight`: 0.3 - 位置相关性权重
- `min_similarity`: 0.2 - 最小相似度阈值

### 内容分隔符设置
- `main_separator`: "\n--- 子规划内容 ---\n" - 主要内容分隔符
- `sub_separator`: "\n\n" - 子内容分隔符

## 关键词映射规则

### 常见主题映射
```yaml
theme_mappings:
  技术研发:
    - 开发
    - 研发
    - 技术
    - 系统
    - 架构
    - 编程

  市场营销:
    - 市场
    - 营销
    - 推广
    - 客户
    - 销售
    - 品牌

  人力资源:
    - 招聘
    - 培训
    - 团队
    - 人才
    - 绩效
    - 文化

  财务管理:
    - 预算
    - 成本
    - 财务
    - 资金
    - 收入
    - 支出

  运营管理:
    - 运营
    - 流程
    - 效率
    - 质量
    - 改进
    - 优化
```

### 章节对应规则
```yaml
section_rules:
  # 当总纲章节包含特定关键词时，优先匹配相应的子规划
  priority_keywords:
    "技术架构": ["系统", "架构", "开发", "技术"]
    "市场策略": ["市场", "营销", "客户", "推广"]
    "团队建设": ["团队", "人才", "招聘", "培训"]
    "财务规划": ["预算", "成本", "财务", "资金"]
```

## 匹配策略

### 1. 优先级匹配
- 完全标题匹配 -> 最高优先级
- 关键词高密度匹配 -> 高优先级
- 内容相似度匹配 -> 中等优先级
- 位置相近匹配 -> 低优先级

### 2. 排除规则
- 如果相似度低于 `min_similarity`，则不进行匹配
- 一个章节最多匹配3个子规划
- 一个子规划只能匹配到一个章节

### 3. 冲突解决
- 如果多个子规划竞争同一章节，选择相似度最高的
- 如果相似度相同，优先选择文件名与章节标题更相似的

## 高级配置

### 自定义停用词
```python
custom_stop_words = [
    '工作', '规划', '计划', '安排', '实施', '执行',
    '管理', '协调', '组织', '负责', '相关', '具体',
    '详细', '完整', '全面', '系统', '有效', '成功'
]
```

### 文件名匹配增强
- 支持文件名与章节标题的模糊匹配
- 支持同义词替换匹配
- 支持缩写和全名匹配

## 输出格式控制

### 内容组织方式
- 保持原有的markdown层次结构
- 为子规划内容添加统一的标识
- 支持自定义分隔符和标记

### 格式化选项
```yaml
formatting:
  indent_subplan_content: true  # 缩进子规划内容
  add_subplan_header: true      # 添加子规划标题
  show_similarity_score: false  # 显示相似度分数
  add_matching_reason: true     # 显示匹配原因
```